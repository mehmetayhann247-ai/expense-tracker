<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª Harcama Takip UygulamasÄ± - Debug Testi</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0; 
            padding: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .debug-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }
        .test-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #6C63FF;
        }
        .success { 
            color: #4CAF50; 
            font-weight: bold; 
        }
        .error { 
            color: #f44336; 
            font-weight: bold; 
        }
        .warning { 
            color: #ff9800; 
            font-weight: bold; 
        }
        .info { 
            color: #2196F3; 
            font-weight: bold; 
        }
        .btn { 
            background: #6C63FF; 
            color: white; 
            padding: 12px 24px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            margin: 8px 4px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .btn:hover { 
            background: #5851d8; 
            transform: translateY(-2px);
        }
        .btn-success {
            background: #4CAF50;
        }
        .btn-warning {
            background: #ff9800;
        }
        .btn-danger {
            background: #f44336;
        }
        iframe { 
            width: 100%; 
            height: 600px; 
            border: 2px solid #ddd; 
            border-radius: 10px;
            background: white;
        }
        #console-output {
            max-height: 300px;
            overflow-y: auto;
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            white-space: pre-wrap;
        }
        .test-steps {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .step {
            margin: 8px 0;
            padding: 8px;
            background: white;
            border-radius: 4px;
            border-left: 3px solid #4CAF50;
        }
    </style>
</head>
<body>
    <div class="debug-container">
        <div class="header">
            <h1>ğŸ§ª Harcama Takip UygulamasÄ± Debug Testi</h1>
            <p>Bu sayfa uygulamanÄ±n Ã§alÄ±ÅŸÄ±p Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± test etmek iÃ§in hazÄ±rlandÄ±.</p>
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ Test SonuÃ§larÄ±</h3>
            <p><strong>Sayfa YÃ¼kleme:</strong> <span id="page-load-status" class="success">âœ… BaÅŸarÄ±lÄ±</span></p>
            <p><strong>JavaScript YÃ¼kleme:</strong> <span id="js-load-status" class="success">âœ… BaÅŸarÄ±lÄ±</span></p>
            <p><strong>LocalStorage:</strong> <span id="localstorage-status" class="success">âœ… Destekleniyor</span></p>
            <p><strong>Console MesajlarÄ±:</strong></p>
            <div id="console-output">Console mesajlarÄ± burada gÃ¶rÃ¼necek...</div>
        </div>

        <div class="test-section">
            <h3>ğŸš€ Harcama Takip UygulamasÄ±</h3>
            <iframe id="app-frame" src="index.html"></iframe>
            
            <div style="margin-top: 15px;">
                <button class="btn" onclick="refreshApp()">ğŸ”„ UygulamayÄ± Yenile</button>
                <button class="btn btn-success" onclick="testFormSubmission()">ğŸ“ Form Testi Yap</button>
                <button class="btn btn-warning" onclick="clearConsole()">ğŸ—‘ï¸ Console'u Temizle</button>
                <button class="btn btn-danger" onclick="clearAllData()">ğŸ—‘ï¸ Verileri Temizle</button>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ“ Test AdÄ±mlarÄ±</h3>
            <div class="test-steps">
                <div class="step">
                    <strong>1. UygulamayÄ± AÃ§Ä±n:</strong> YukarÄ±daki iframe'te uygulamayÄ± gÃ¶rmeniz gerekiyor
                </div>
                <div class="step">
                    <strong>2. "+" Butonuna TÄ±klayÄ±n:</strong> Floating action button'a tÄ±klayÄ±n
                </div>
                <div class="step">
                    <strong>3. Form Doldurun:</strong> Harcama/Gelir, Tutar, Kategori seÃ§in
                </div>
                <div class="step">
                    <strong>4. "Ekle" Butonuna TÄ±klayÄ±n:</strong> Form submit edilecek
                </div>
                <div class="step">
                    <strong>5. Sonucu Kontrol Edin:</strong> Ana ekranda yeni iÅŸlem gÃ¶rÃ¼nmeli
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ”§ Sorun Giderme</h3>
            <p><strong>EÄŸer ekleme Ã§alÄ±ÅŸmÄ±yorsa:</strong></p>
            <ul>
                <li>ğŸ” Console mesajlarÄ±nÄ± yukarÄ±daki log'ta kontrol edin</li>
                <li>ğŸ”„ SayfayÄ± yenileyin (F5)</li>
                <li>ğŸ—‘ï¸ Verileri temizleyin ve tekrar deneyin</li>
                <li>ğŸ“± Mobilde ana ekrana ekleyerek test edin</li>
            </ul>
        </div>
    </div>

    <script>
        let consoleMessages = [];
        
        function addConsoleMessage(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? 'âŒ' : 
                          type === 'success' ? 'âœ…' : 
                          type === 'warning' ? 'âš ï¸' : 'â„¹ï¸';
            
            consoleMessages.push(`[${timestamp}] ${prefix} ${message}`);
            
            // Console output'u gÃ¼ncelle
            const consoleEl = document.getElementById('console-output');
            consoleEl.textContent = consoleMessages.join('\n');
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }
        
        // Original console.log'u intercept et
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addConsoleMessage(args.join(' '), 'info');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addConsoleMessage(args.join(' '), 'error');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addConsoleMessage(args.join(' '), 'warning');
        };
        
        function testLocalStorage() {
            try {
                localStorage.setItem('test', 'test-value');
                localStorage.removeItem('test');
                document.getElementById('localstorage-status').innerHTML = 'âœ… Destekleniyor';
                document.getElementById('localstorage-status').className = 'success';
                addConsoleMessage('LocalStorage baÅŸarÄ±yla test edildi', 'success');
                return true;
            } catch (e) {
                document.getElementById('localstorage-status').innerHTML = 'âŒ Desteklenmiyor';
                document.getElementById('localstorage-status').className = 'error';
                addConsoleMessage('LocalStorage hatasÄ±: ' + e.message, 'error');
                return false;
            }
        }
        
        function refreshApp() {
            const iframe = document.getElementById('app-frame');
            iframe.src = 'index.html?' + Date.now();
            addConsoleMessage('Uygulama yenilendi', 'info');
        }
        
        function testFormSubmission() {
            try {
                const iframe = document.getElementById('app-frame');
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                addConsoleMessage('Form testi baÅŸlatÄ±lÄ±yor...', 'info');
                
                // FAB butonunu bul ve tÄ±kla
                const fab = iframeDoc.getElementById('fab');
                if (fab) {
                    fab.click();
                    addConsoleMessage('FAB butonuna tÄ±klandÄ±', 'success');
                    
                    // 1 saniye sonra formu test et
                    setTimeout(() => {
                        const modal = iframeDoc.getElementById('transaction-modal');
                        if (modal && modal.classList.contains('show')) {
                            addConsoleMessage('Modal baÅŸarÄ±yla aÃ§Ä±ldÄ±', 'success');
                            
                            // Form alanlarÄ±nÄ± doldur
                            const amountInput = iframeDoc.getElementById('amount');
                            const categorySelect = iframeDoc.getElementById('category');
                            const descriptionInput = iframeDoc.getElementById('description');
                            
                            if (amountInput && categorySelect) {
                                amountInput.value = '25';
                                descriptionInput.value = 'Test harcamasÄ±';
                                
                                // Ä°lk kategoriyi seÃ§
                                if (categorySelect.options.length > 1) {
                                    categorySelect.selectedIndex = 1;
                                    addConsoleMessage('Form alanlarÄ± dolduruldu', 'success');
                                }
                            }
                        } else {
                            addConsoleMessage('Modal aÃ§Ä±lamadÄ±', 'error');
                        }
                    }, 1000);
                } else {
                    addConsoleMessage('FAB butonu bulunamadÄ±', 'error');
                }
            } catch (e) {
                addConsoleMessage('Test hatasÄ±: ' + e.message, 'error');
            }
        }
        
        function clearConsole() {
            consoleMessages = [];
            document.getElementById('console-output').textContent = 'Console mesajlarÄ± burada gÃ¶rÃ¼necek...';
            addConsoleMessage('Console temizlendi', 'info');
        }
        
        function clearAllData() {
            try {
                localStorage.clear();
                sessionStorage.clear();
                addConsoleMessage('TÃ¼m depolama temizlendi', 'info');
                
                // UygulamayÄ± yenile
                setTimeout(() => {
                    refreshApp();
                }, 500);
            } catch (e) {
                addConsoleMessage('Temizleme hatasÄ±: ' + e.message, 'error');
            }
        }
        
        // Sayfa yÃ¼klendiÄŸinde testleri Ã§alÄ±ÅŸtÄ±r
        document.addEventListener('DOMContentLoaded', function() {
            addConsoleMessage('Debug sayfasÄ± yÃ¼klendi', 'success');
            addConsoleMessage('Test sistemleri baÅŸlatÄ±lÄ±yor...', 'info');
            
            setTimeout(() => {
                testLocalStorage();
            }, 500);
            
            setTimeout(() => {
                addConsoleMessage('Test sistemleri hazÄ±r!', 'success');
                addConsoleMessage('UygulamayÄ± yukarÄ±daki iframe\'te test edebilirsiniz.', 'info');
            }, 1000);
        });
    </script>
</body>
</html>