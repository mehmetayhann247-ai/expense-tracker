<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Expense Tracker</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #f5f5f5; 
        }
        .test-container { 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
            margin-bottom: 20px;
        }
        .success { 
            color: #4CAF50; 
            font-weight: bold; 
        }
        .error { 
            color: #f44336; 
            font-weight: bold; 
        }
        .btn { 
            background: #6C63FF; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
        }
        .btn:hover { 
            background: #5851d8; 
        }
        iframe { 
            width: 100%; 
            height: 600px; 
            border: 1px solid #ddd; 
            border-radius: 5px;
        }
        #test-results {
            max-height: 200px;
            overflow-y: auto;
            background: #f9f9f9;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¯ Harcama TakipÃ§isi Test SayfasÄ±</h1>
        <p><strong>Sunucu Durumu:</strong> <span id="server-status" class="success">âœ… Ã‡alÄ±ÅŸÄ±yor</span></p>
        <p><strong>LocalStorage Test:</strong> <span id="localstorage-test" class="success">âœ… Destekleniyor</span></p>
        
        <h3>ğŸ“‹ Test SonuÃ§larÄ±</h3>
        <div id="test-results">
            <div>Test baÅŸlatÄ±lÄ±yor...</div>
        </div>
        
        <h3>ğŸš€ Harcama Takip UygulamasÄ±</h3>
        <iframe id="app-frame" src="http://localhost:7000/index.html"></iframe>
        
        <div style="margin-top: 10px;">
            <button class="btn" onclick="refreshApp()">ğŸ”„ UygulamayÄ± Yenile</button>
            <button class="btn" onclick="testFormFunction()">ğŸ§ª Form Testi Yap</button>
            <button class="btn" onclick="clearTestData()">ğŸ—‘ï¸ Test Verilerini Temizle</button>
        </div>
    </div>

    <script>
        let testResults = [];
        
        function addTestResult(message, type = 'info') {
            testResults.push(`[${new Date().toLocaleTimeString()}] ${type.toUpperCase()}: ${message}`);
            document.getElementById('test-results').innerHTML = testResults.join('<br>');
        }
        
        function testLocalStorage() {
            try {
                localStorage.setItem('test', 'value');
                localStorage.removeItem('test');
                document.getElementById('localstorage-test').innerHTML = 'âœ… Destekleniyor';
                document.getElementById('localstorage-test').className = 'success';
                addTestResult('LocalStorage baÅŸarÄ±yla test edildi', 'success');
                return true;
            } catch (e) {
                document.getElementById('localstorage-test').innerHTML = 'âŒ Desteklenmiyor';
                document.getElementById('localstorage-test').className = 'error';
                addTestResult('LocalStorage hatasÄ±: ' + e.message, 'error');
                return false;
            }
        }
        
        function refreshApp() {
            document.getElementById('app-frame').src = 'http://localhost:7000/index.html?' + Date.now();
            addTestResult('Uygulama yenilendi', 'info');
        }
        
        function testFormFunction() {
            try {
                const iframe = document.getElementById('app-frame');
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // FAB butonuna tÄ±kla
                const fab = iframeDoc.getElementById('fab');
                if (fab) {
                    fab.click();
                    addTestResult('FAB butonuna tÄ±klandÄ±', 'success');
                    
                    // Modal aÃ§Ä±ldÄ± mÄ± kontrol et
                    setTimeout(() => {
                        const modal = iframeDoc.getElementById('transaction-modal');
                        if (modal && modal.classList.contains('show')) {
                            addTestResult('Modal baÅŸarÄ±yla aÃ§Ä±ldÄ±', 'success');
                        } else {
                            addTestResult('Modal aÃ§Ä±lamadÄ±', 'error');
                        }
                    }, 500);
                } else {
                    addTestResult('FAB butonu bulunamadÄ±', 'error');
                }
            } catch (e) {
                addTestResult('Test hatasÄ±: ' + e.message, 'error');
            }
        }
        
        function clearTestData() {
            try {
                localStorage.clear();
                addTestResult('LocalStorage temizlendi', 'info');
                refreshApp();
            } catch (e) {
                addTestResult('Temizleme hatasÄ±: ' + e.message, 'error');
            }
        }
        
        // Sayfa yÃ¼klendiÄŸinde testleri Ã§alÄ±ÅŸtÄ±r
        document.addEventListener('DOMContentLoaded', function() {
            addTestResult('Test sayfasÄ± yÃ¼klendi', 'info');
            
            // LocalStorage test et
            setTimeout(testLocalStorage, 1000);
            
            // Sunucu durumunu kontrol et
            setTimeout(() => {
                fetch('http://localhost:7000/')
                    .then(response => {
                        if (response.ok) {
                            addTestResult('Sunucu yanÄ±t veriyor', 'success');
                        } else {
                            addTestResult('Sunucu hatasÄ±: ' + response.status, 'error');
                        }
                    })
                    .catch(error => {
                        addTestResult('Sunucu baÄŸlantÄ± hatasÄ±: ' + error.message, 'error');
                        document.getElementById('server-status').innerHTML = 'âŒ Ã‡alÄ±ÅŸmÄ±yor';
                        document.getElementById('server-status').className = 'error';
                    });
            }, 500);
        });
    </script>
</body>
</html>